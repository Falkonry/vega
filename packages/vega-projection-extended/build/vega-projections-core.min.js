!function(n,r){"object"==typeof exports&&"undefined"!=typeof module?r(require("vega-projection"),require("d3-geo"),require("d3-array")):"function"==typeof define&&define.amd?define(["vega-projection","d3-geo","d3-array"],r):r((n="undefined"!=typeof globalThis?globalThis:n||self).vega,n.d3,n.d3)}(this,(function(n,r,t){"use strict";var e=Math.abs,o=Math.atan,i=Math.atan2,u=Math.cos,c=Math.exp,a=Math.floor,f=Math.log,v=Math.max,l=Math.min,p=Math.pow,g=Math.round,s=Math.sign||function(n){return n>0?1:n<0?-1:0},h=Math.sin,j=Math.tan,d=1e-6,m=1e-12,P=Math.PI,w=P/2,y=P/4,M=Math.SQRT1_2,E=R(2),A=R(P),b=2*P,S=180/P,k=P/180;function N(n){return n>1?w:n<-1?-w:Math.asin(n)}function z(n){return n>1?0:n<-1?P:Math.acos(n)}function R(n){return n>0?Math.sqrt(n):0}function q(n){return(c(n)-c(-n))/2}function x(n){return(c(n)+c(-n))/2}function G(n){var r=j(n/2),t=2*f(u(n/2))/(r*r);function o(n,r){var e=u(n),o=u(r),i=h(r),c=o*e,a=-((1-c?f((1+c)/2)/(1-c):-.5)+t/(1+c));return[a*o*h(n),a*i]}return o.invert=function(r,o){var c,a=R(r*r+o*o),v=-n/2,l=50;if(!a)return[0,0];do{var p=v/2,g=u(p),s=h(p),j=s/g,m=-f(e(g));v-=c=(2/j*m-t*j-a)/(-m/(s*s)+1-t/(2*g*g))*(g<0?.7:1)}while(e(c)>d&&--l>0);var P=h(v);return[i(r*P,a*u(v)),N(o*P/a)]},o}function C(n,r){var t=u(r),e=function(n){return n?n/Math.sin(n):1}(z(t*u(n/=2)));return[2*t*h(n)*e,h(r)*e]}function D(n){var r=h(n),t=u(n),o=n>=0?1:-1,c=j(o*n),a=(1+r-t)/2;function f(n,e){var f=u(e),v=u(n/=2);return[(1+f)*h(n),(o*e>-i(v,c)-.001?0:10*-o)+a+h(e)*t-(1+f)*r*v]}return f.invert=function(n,f){var v=0,l=0,p=50;do{var g=u(v),s=h(v),j=u(l),m=h(l),P=1+j,w=P*s-n,y=a+m*t-P*r*g-f,M=P*g/2,E=-s*m,A=r*P*s/2,b=t*j+r*g*m,S=E*A-b*M,k=(y*E-w*b)/S/2,N=(w*A-y*M)/S;e(N)>2&&(N/=2),v-=k,l-=N}while((e(k)>d||e(N)>d)&&--p>0);return o*l>-i(u(v),c)-.001?[2*v,l]:null},f}function Q(n,r){var t=j(r/2),e=R(1-t*t),o=1+e*u(n/=2),i=h(n)*e/o,c=t/o,a=i*i,f=c*c;return[4/3*i*(3+a-3*f),4/3*c*(3+3*a-f)]}C.invert=function(n,r){if(!(n*n+4*r*r>P*P+d)){var t=n,o=r,i=25;do{var c,a=h(t),f=h(t/2),v=u(t/2),l=h(o),p=u(o),g=h(2*o),s=l*l,j=p*p,m=f*f,w=1-j*v*v,y=w?z(p*v)*R(c=1/w):c=0,M=2*y*p*f-n,E=y*l-r,A=c*(j*m+y*p*v*s),b=c*(.5*a*g-2*y*l*f),S=.25*c*(g*f-y*l*j*a),k=c*(s*v+y*m*p),N=b*S-k*A;if(!N)break;var q=(E*b-M*k)/N,x=(M*S-E*A)/N;t-=q,o-=x}while((e(q)>d||e(x)>d)&&--i>0);return[t,o]}},Q.invert=function(n,r){if(r*=3/8,!(n*=3/8)&&e(r)>1)return null;var t=1+n*n+r*r,o=R((t-R(t*t-4*r*r))/2),c=N(o)/3,a=o?function(n){return f(n+R(n*n-1))}(e(r/o))/3:function(n){return f(n+R(n*n+1))}(e(n))/3,v=u(c),l=x(a),p=l*l-v*v;return[2*s(n)*i(q(a)*v,.25-p),2*s(r)*i(l*h(c),.25+p)]};var H=R(8),I=f(1+E);function B(n,r){var t=e(r);return t<y?[n,f(j(y+r/2))]:[n*u(t)*(2*E-1/h(t)),s(r)*(2*E*(t-y)-f(j(t/2)))]}function F(n){var t=2*P/n;function c(n,o){var c=r.geoAzimuthalEquidistantRaw(n,o);if(e(n)>w){var a=i(c[1],c[0]),f=R(c[0]*c[0]+c[1]*c[1]),v=t*g((a-w)/t)+w,l=i(h(a-=v),2-u(a));a=v+N(P/f*h(l))-l,c[0]=f*u(a),c[1]=f*h(a)}return c}return c.invert=function(n,e){var c=R(n*n+e*e);if(c>w){var a=i(e,n),f=t*g((a-w)/t)+w,v=a>f?-1:1,l=c*u(f-a),p=1/j(v*z((l-P)/R(P*(P-2*l)+c*c)));a=f+2*o((p+v*R(p*p-3))/3),n=c*u(a),e=c*h(a)}return r.geoAzimuthalEquidistantRaw.invert(n,e)},c}function T(n,t){if(arguments.length<2&&(t=n),1===t)return r.geoAzimuthalEqualAreaRaw;if(t===1/0)return U;function e(e,o){var i=r.geoAzimuthalEqualAreaRaw(e/t,o);return i[0]*=n,i}return e.invert=function(e,o){var i=r.geoAzimuthalEqualAreaRaw.invert(e/n,o);return i[0]*=t,i},e}function U(n,r){return[n*u(r)/u(r/=2),2*h(r)]}function W(n,r,t){var o,i,u,c=100;t=void 0===t?0:+t,r=+r;do{(i=n(t))===(u=n(t+d))&&(u=i+d),t-=o=-1*d*(i-r)/(i-u)}while(c-- >0&&e(o)>d);return c<0?NaN:t}function L(n,r,t){return void 0===r&&(r=40),void 0===t&&(t=m),function(o,i,u,c){var a,f,v;u=void 0===u?0:+u,c=void 0===c?0:+c;for(var l=0;l<r;l++){var p=n(u,c),g=p[0]-o,s=p[1]-i;if(e(g)<t&&e(s)<t)break;var h=g*g+s*s;if(h>a)u-=f/=2,c-=v/=2;else{a=h;var j=(u>0?-1:1)*t,d=(c>0?-1:1)*t,m=n(u+j,c),P=n(u,c+d),w=(m[0]-p[0])/j,y=(m[1]-p[1])/j,M=(P[0]-p[0])/d,E=(P[1]-p[1])/d,A=E*w-y*M,b=(e(A)<.5?.5:1)/A;if(u+=f=(s*M-g*E)*b,c+=v=(g*y-s*w)*b,e(f)<t&&e(v)<t)break}}return[u,c]}}function O(n,r){var t,o=n*h(r),i=30;do{r-=t=(r+h(r)-o)/(1+u(r))}while(e(t)>d&&--i>0);return r/2}function _(n,r,t){function e(e,o){return[n*e*u(o=O(t,o)),r*h(o)]}return e.invert=function(e,o){return o=N(o/r),[e/(n*u(o)),N((2*o+h(2*o))/t)]},e}B.invert=function(n,r){if((i=e(r))<I)return[n,2*o(c(r))-w];var t,i,a=y,v=25;do{var l=u(a/2),p=j(a/2);a-=t=(H*(a-y)-f(p)-i)/(H-l*l/(2*p))}while(e(t)>m&&--v>0);return[n/(u(a)*(H-1/h(a))),s(r)*a]},U.invert=function(n,r){var t=2*N(r/2);return[n*u(t/2)/u(t),t]};var J=_(E/w,E,P),K=2.00276,V=1.11072;function X(n,r){var t=O(P,r);return[K*n/(1/u(r)+V/u(t)),(r+E*h(t))/K]}function Y(n){var t=0,e=r.geoProjectionMutator(n),o=e(t);return o.parallel=function(n){return arguments.length?e(t=n*k):t*S},o}function Z(n,r){return[n*u(r),r]}function $(n){if(!n)return Z;var r=1/j(n);function t(t,e){var o=r+n-e,i=o?t*u(e)/o:o;return[o*h(i),r-o*u(i)]}return t.invert=function(t,e){var o=R(t*t+(e=r-e)*e),c=r+n-o;return[o/u(c)*i(t,e),c]},t}function nn(n){function r(r,t){var e=w-t,o=e?r*n*h(e)/e:e;return[e*h(o)/n,w-e*u(o)]}return r.invert=function(r,t){var e=r*n,o=w-t,u=R(e*e+o*o),c=i(e,o);return[(u?u/h(u):1)*c/n,w-u]},r}X.invert=function(n,r){var t,o,i=K*r,c=r<0?-y:y,a=25;do{o=i-E*h(c),c-=t=(h(2*c)+2*c-P*h(o))/(2*u(2*c)+2+P*u(o)*E*u(c))}while(e(t)>d&&--a>0);return o=i-E*h(c),[n*(1/u(o)+V/u(c))/K,o]},Z.invert=function(n,r){return[n/u(r),r]};var rn=_(1,4/P,P);function tn(n,r,t,o,c,a){var f,v=u(a);if(e(n)>1||e(a)>1)f=z(t*c+r*o*v);else{var l=h(n/2),p=h(a/2);f=2*N(R(l*l+r*o*p*p))}return e(f)>d?[f,i(o*h(a),r*c-t*o*v)]:[0,0]}function en(n,r,t){return z((n*n+r*r-t*t)/(2*n*r))}function on(n){return n-2*P*a((n+P)/(2*P))}function un(n){return n[0]*=k,n[1]*=k,n}function cn(n,r){var t=R(1-h(r));return[2/A*n*t,A*(1-t)]}function an(n){var r=j(n);function t(n,t){return[n,(n?n/h(n):1)*(h(t)*u(n)-r*u(t))]}return t.invert=r?function(n,t){n&&(t*=h(n)/n);var e=u(n);return[n,2*i(R(e*e+r*r-t*t)-e,r-t)]}:function(n,r){return[n,N(n?r*j(n)/n:r)]},t}cn.invert=function(n,r){var t=(t=r/A-1)*t;return[t>0?n*R(P/t)/2:0,N(1-t)]};var fn=R(3);function vn(n,r){return[fn*n*(2*u(2*r/3)-1)/A,fn*A*h(r/3)]}function ln(n){var r=u(n);function t(n,t){return[n*r,h(t)/r]}return t.invert=function(n,t){return[n/r,N(t*r)]},t}function pn(n){var r=u(n);function t(n,t){return[n*r,(1+r)*j(t/2)]}return t.invert=function(n,t){return[n/r,2*o(t/(1+r))]},t}function gn(n,r){var t=R(8/(3*P));return[t*n*(1-e(r)/P),t*r]}function sn(n,r){var t=R(4-3*h(e(r)));return[2/R(6*P)*n*t,s(r)*R(2*P/3)*(2-t)]}function hn(n,r){var t=R(P*(4+P));return[2/t*n*(1+R(1-4*r*r/(P*P))),4/t*r]}function jn(n,r){var t=(2+w)*h(r);r/=2;for(var o=0,i=1/0;o<10&&e(i)>d;o++){var c=u(r);r-=i=(r+h(r)*(c+2)-t)/(2*c*(1+c))}return[2/R(P*(4+P))*n*(1+u(r)),2*R(P/(4+P))*h(r)]}function dn(n,r){return[n*(1+u(r))/R(2+P),2*r/R(2+P)]}function mn(n,r){for(var t=(1+w)*h(r),o=0,i=1/0;o<10&&e(i)>d;o++)r-=i=(r+h(r)-t)/(1+u(r));return t=R(2+P),[n*(1+u(r))/t,2*r/t]}vn.invert=function(n,r){var t=3*N(r/(fn*A));return[A*n/(fn*(2*u(2*t/3)-1)),t]},gn.invert=function(n,r){var t=R(8/(3*P)),o=r/t;return[n/(t*(1-e(o)/P)),o]},sn.invert=function(n,r){var t=2-e(r)/R(2*P/3);return[n*R(6*P)/(2*t),s(r)*N((4-t*t)/3)]},hn.invert=function(n,r){var t=R(P*(4+P))/2;return[n*t/(1+R(1-r*r*(4+P)/(4*P))),r*t/2]},jn.invert=function(n,r){var t=r*R((4+P)/P)/2,e=N(t),o=u(e);return[n/(2/R(P*(4+P))*(1+o)),N((e+t*(o+2))/(2+w))]},dn.invert=function(n,r){var t=R(2+P),e=r*t/2;return[t*n/(1+u(e)),e]},mn.invert=function(n,r){var t=1+w,e=R(t/2);return[2*n*e/(1+u(r*=e)),N((r+h(r))/t)]};var Pn=3+2*E;function wn(n,r){var t=h(n/=2),e=u(n),i=R(u(r)),c=u(r/=2),a=h(r)/(c+E*e*i),v=R(2/(1+a*a)),l=R((E*c+(e+t)*i)/(E*c+(e-t)*i));return[Pn*(v*(l-1/l)-2*f(l)),Pn*(v*a*(l+1/l)-2*o(a))]}wn.invert=function(n,r){if(!(t=Q.invert(n/1.2,1.065*r)))return null;var t,i=t[0],c=t[1],a=20;n/=Pn,r/=Pn;do{var p=i/2,g=c/2,s=h(p),j=u(p),m=h(g),P=u(g),y=u(c),A=R(y),b=m/(P+E*j*A),S=b*b,k=R(2/(1+S)),N=(E*P+(j+s)*A)/(E*P+(j-s)*A),z=R(N),q=z-1/z,x=z+1/z,G=k*q-2*f(z)-n,C=k*b*x-2*o(b)-r,D=m&&M*A*s*S/m,H=(E*j*P+A)/(2*(P+E*j*A)*(P+E*j*A)*A),I=-.5*b*k*k*k,B=I*D,F=I*H,T=(T=2*P+E*A*(j-s))*T*z,U=(E*j*P*A+y)/T,W=-E*s*m/(A*T),L=q*B-2*U/z+k*(U+U/N),O=q*F-2*W/z+k*(W+W/N),_=b*x*B-2*D/(1+S)+k*x*D+k*b*(U-U/N),J=b*x*F-2*H/(1+S)+k*x*H+k*b*(W-W/N),K=O*_-J*L;if(!K)break;var V=(C*O-G*J)/K,X=(G*_-C*L)/K;i-=V,c=v(-w,l(w,c-X))}while((e(V)>d||e(X)>d)&&--a>0);return e(e(c)-w)<d?[0,c]:a&&[i,c]};var yn=u(35*k);function Mn(n,r){var t=j(r/2);return[n*yn*R(1-t*t),(1+yn)*t]}function En(n,r){var t=r/2,e=u(t);return[2*n/A*u(r)*e*e,A*j(t)]}function An(n){var r=1-n,t=o(P,0)[0]-o(-P,0)[0],e=R(2*(o(0,w)[1]-o(0,-w)[1])/t);function o(t,e){var o=u(e),i=h(e);return[o/(r+n*o)*t,r*e+n*i]}function i(n,r){var t=o(n,r);return[t[0]*e,t[1]/e]}function c(n){return i(0,n)[1]}return i.invert=function(t,o){var i=W(c,o);return[t/e*(n+r/u(i)),i]},i}function bn(n){return[n[0]/2,N(j(n[1]/2*k))*S]}function Sn(n){return[2*n[0],2*o(h(n[1]*k))*S]}function kn(n,t){var o=2*P/t,c=n*n;function a(t,a){var f=r.geoAzimuthalEquidistantRaw(t,a),v=f[0],l=f[1],p=v*v+l*l;if(p>c){var s=R(p),j=i(l,v),m=o*g(j/o),y=j-m,M=n*u(y),E=(n*h(y)-y*h(M))/(w-M),A=Nn(y,E),b=(P-n)/zn(A,M,P);v=s;var S,k=50;do{v-=S=(n+zn(A,M,v)*b-s)/(A(v)*b)}while(e(S)>d&&--k>0);l=y*h(v),v<w&&(l-=E*(v-w));var N=h(m),z=u(m);f[0]=v*z-l*N,f[1]=v*N+l*z}return f}return a.invert=function(t,a){var f=t*t+a*a;if(f>c){var v=R(f),l=i(a,t),p=o*g(l/o),s=l-p;t=v*u(s),a=v*h(s);for(var j=t-w,d=h(t),y=a/d,M=t<w?1/0:0,E=10;;){var A=n*h(y),b=n*u(y),S=h(b),k=w-b,N=(A-y*S)/k,z=Nn(y,N);if(e(M)<m||!--E)break;y-=M=(y*d-N*j-a)/(d-2*j*(k*(b+y*A*u(b)-S)-A*(A-y*S))/(k*k))}t=(v=n+zn(z,b,t)*(P-n)/zn(z,b,P))*u(l=p+y),a=v*h(l)}return r.geoAzimuthalEquidistantRaw.invert(t,a)},a}function Nn(n,r){return function(t){var e=n*u(t);return t<w&&(e-=r),R(1+e*e)}}function zn(n,r,t){for(var e=(t-r)/50,o=n(r)+n(t),i=1,u=r;i<50;++i)o+=2*n(u+=e);return.5*o*e}function Rn(n,r,t,o,i,c,a,f){function v(e,v){if(!v)return[n*e/P,0];var l=v*v,p=n+l*(r+l*(t+l*o)),g=v*(i-1+l*(c-f+l*a)),s=(p*p+g*g)/(2*g),j=e*N(p/s)/P;return[s*h(j),v*(1+l*f)+s*(1-u(j))]}return arguments.length<8&&(f=0),v.invert=function(v,l){var p,g,s=P*v/n,j=l,m=50;do{var w=j*j,y=n+w*(r+w*(t+w*o)),M=j*(i-1+w*(c-f+w*a)),E=y*y+M*M,A=2*M,b=E/A,S=b*b,k=N(y/b)/P,z=s*k,q=y*y,x=(2*r+w*(4*t+6*w*o))*j,G=i+w*(3*c+5*w*a),C=(2*(y*x+M*(G-1))*A-E*(2*(G-1)))/(A*A),D=u(z),Q=h(z),H=b*D,I=b*Q,B=s/P*(1/R(1-q/S))*(x*b-y*C)/S,F=I-v,T=j*(1+w*f)+b-H-l,U=C*Q+H*B,W=H*k,L=1+C-(C*D-I*B),O=I*k,_=U*O-L*W;if(!_)break;s-=p=(T*U-F*L)/_,j-=g=(F*O-T*W)/_}while((e(p)>d||e(g)>d)&&--m>0);return[s,j]},v}Mn.invert=function(n,r){var t=r/(1+yn);return[n&&n/(yn*R(1-t*t)),2*o(t)]},En.invert=function(n,r){var t=o(r/A),e=u(t),i=2*t;return[n*A/2/(u(i)*e*e),i]};var qn=Rn(2.8284,-1.6988,.75432,-.18071,1.76003,-.38914,.042555);var xn=Rn(2.583819,-.835827,.170354,-.038094,1.543313,-.411435,.082742);var Gn=Rn(5/6*P,-.62636,-.0344,0,1.3493,-.05524,0,.045);function Cn(n,r){var t=n*n,e=r*r;return[n*(1-.162388*e)*(.87-952426e-9*t*t),r*(1+e/12)]}Cn.invert=function(n,r){var t,o=n,i=r,u=50;do{var c=i*i;i-=t=(i*(1+c/12)-r)/(1+c/4)}while(e(t)>d&&--u>0);u=50,n/=1-.162388*c;do{var a=(a=o*o)*a;o-=t=(o*(.87-952426e-9*a)-n)/(.87-.00476213*a)}while(e(t)>d&&--u>0);return[o,i]};var Dn=Rn(2.6516,-.76534,.19123,-.047094,1.36289,-.13965,.031762);function Qn(n){var r=n(w,0)[0]-n(-w,0)[0];function t(t,e){var o=t>0?-.5:.5,i=n(t+o*P,e);return i[0]-=o*r,i}return n.invert&&(t.invert=function(t,e){var o=t>0?-.5:.5,i=n.invert(t+o*r,e),u=i[0]-o*P;return u<-P?u+=2*P:u>P&&(u-=2*P),i[0]=u,i}),t}function Hn(n,r){var t=s(n),o=s(r),c=u(r),a=u(n)*c,f=h(n)*c,v=h(o*r);n=e(i(f,v)),r=N(a),e(n-w)>d&&(n%=w);var l=function(n,r){if(r===w)return[0,0];var t,o,i=h(r),c=i*i,a=c*c,f=1+a,v=1+3*a,l=1-a,p=N(1/R(f)),g=l+c*f*p,s=(1-i)/g,j=R(s),m=s*f,y=R(m),M=j*l;if(0===n)return[0,-(M+c*y)];var E,A=u(r),b=1/A,S=2*i*A,k=(-3*c+p*v)*S,z=(-g*A-(1-i)*k)/(g*g),q=c*f*z+s*v*S,x=-b*S,G=-b*q,C=-2*b*(l*(.5*z/j)-2*c*j*S),D=4*n/P;if(n>.222*P||r<P/4&&n>.175*P){if(t=(M+c*R(m*(1+a)-M*M))/(1+a),n>P/4)return[t,t];var Q=t,H=.5*t;t=.5*(H+Q),o=50;do{var I=t*(C+x*R(m-t*t))+G*N(t/y)-D;if(!I)break;I<0?H=t:Q=t,t=.5*(H+Q)}while(e(Q-H)>d&&--o>0)}else{t=d,o=25;do{var B=t*t,F=R(m-B),T=C+x*F,U=t*T+G*N(t/y)-D;t-=E=F?U/(T+(G-x*B)/F):0}while(e(E)>d&&--o>0)}return[t,-M-c*R(m-t*t)]}(n>P/4?w-n:n,r);return n>P/4&&(v=l[0],l[0]=-l[1],l[1]=-v),l[0]*=t,l[1]*=-o,l}function In(n,r){var t,i,a,f,v,l;if(r<d)return[(f=h(n))-(t=r*(n-f*(i=u(n)))/4)*i,i+t*f,1-r*f*f/2,n-t];if(r>=1-d)return t=(1-r)/4,a=1/(i=x(n)),[(f=((l=c(2*(l=n)))-1)/(l+1))+t*((v=i*q(n))-n)/(i*i),a-t*f*a*(v-n),a+t*f*a*(v+n),2*o(c(n))-w+t*(v-n)/i];var p=[1,0,0,0,0,0,0,0,0],g=[R(r),0,0,0,0,0,0,0,0],s=0;for(i=R(1-r),v=1;e(g[s]/p[s])>d&&s<8;)t=p[s++],g[s]=(t-i)/2,p[s]=(t+i)/2,i=R(t*i),v*=2;a=v*p[s]*n;do{a=(N(f=g[s]*h(i=a)/p[s])+a)/2}while(--s);return[h(a),f=u(a),f/u(a-i),a]}function Bn(n,r){if(!r)return n;if(1===r)return f(j(n/2+y));for(var t=1,i=R(1-r),u=R(r),c=0;e(u)>d;c++){if(n%P){var a=o(i*j(n)/t);a<0&&(a+=P),n+=a+~~(n/P)*P}else n+=n;u=(t+i)/2,i=R(t*i),u=((t=u)-i)/2}return n/(p(2,c)*t)}function Fn(n,r){var t=(E-1)/(E+1),a=R(1-t*t),v=Bn(w,a*a),l=f(j(P/4+e(r)/2)),p=c(-1*l)/R(t),g=function(n,r){var t=n*n,e=r+1,o=1-t-r*r;return[.5*((n>=0?w:-w)-i(o,2*n)),-.25*f(o*o+4*t)+.5*f(e*e+t)]}(p*u(-1*n),p*h(-1*n)),d=function(n,r,t){var i=e(n),u=q(e(r));if(i){var c=1/h(i),a=1/(j(i)*j(i)),f=-(a+t*(u*u*c*c)-1+t),v=(-f+R(f*f-(t-1)*a*4))/2;return[Bn(o(1/R(v)),t)*s(n),Bn(o(R((v/a-1)/t)),1-t)*s(r)]}return[0,Bn(o(u),1-t)*s(r)]}(g[0],g[1],a*a);return[-d[1],(r>=0?1:-1)*(.5*v-d[0])]}function Tn(n){var r=h(n),t=u(n),o=Un(n);function c(n,i){var c=o(n,i);n=c[0],i=c[1];var a=h(i),f=u(i),v=u(n),l=z(r*a+t*f*v),p=h(l),g=e(p)>d?l/p:1;return[g*t*h(n),(e(n)>w?g:-g)*(r*f-t*a*v)]}return o.invert=Un(-n),c.invert=function(n,t){var e=R(n*n+t*t),c=-h(e),a=u(e),f=e*a,v=-t*c,l=e*r,p=R(f*f+v*v-l*l),g=i(f*l+v*p,v*l-f*p),s=(e>w?-1:1)*i(n*c,e*u(g)*a+t*h(g)*c);return o.invert(s,g)},c}function Un(n){var r=h(n),t=u(n);return function(n,e){var o=u(e),c=u(n)*o,a=h(n)*o,f=h(e);return[i(a,c*t-f*r),N(f*t+c*r)]}}Hn.invert=function(n,r){e(n)>1&&(n=2*s(n)-n),e(r)>1&&(r=2*s(r)-r);var t=s(n),o=s(r),c=-t*n,a=-o*r,f=a/c<1,v=function(n,r){var t=0,o=1,i=.5,c=50;for(;;){var a=i*i,f=R(i),v=N(1/R(1+a)),l=1-a+i*(1+a)*v,p=(1-f)/l,g=R(p),s=p*(1+a),h=g*(1-a),j=R(s-n*n),d=r+h+i*j;if(e(o-t)<m||0==--c||0===d)break;d>0?t=i:o=i,i=.5*(t+o)}if(!c)return null;var w=N(f),y=u(w),M=1/y,E=2*f*y,A=(-l*y-(-3*i+v*(1+3*a))*E*(1-f))/(l*l),b=.5*A/g,S=(1-a)*b-2*i*g*E;return[P/4*(n*(-2*M*S+-M*E*j)+-M*(i*(1+a)*A+p*(1+3*a)*E)*N(n/R(s))),w]}(f?a:c,f?c:a),l=v[0],p=v[1],g=u(p);return f&&(l=-w-l),[t*(i(h(l)*g,-h(p))+P),o*N(u(l)*g)]},Fn.invert=function(n,r){var t,e,u,a,v,l,p=(E-1)/(E+1),g=R(1-p*p),s=Bn(w,g*g),h=(e=-n,u=g*g,(t=.5*s-r)?(a=In(t,u),e?(l=(v=In(e,1-u))[1]*v[1]+u*a[0]*a[0]*v[0]*v[0],[[a[0]*v[2]/l,a[1]*a[2]*v[0]*v[1]/l],[a[1]*v[1]/l,-a[0]*a[2]*v[0]*v[2]/l],[a[2]*v[1]*v[2]/l,-u*a[0]*a[1]*v[0]/l]]):[[a[0],0],[a[1],0],[a[2],0]]):[[0,(v=In(e,1-u))[0]/v[1]],[1/v[1],0],[v[2]/v[1],0]]),j=function(n,r){var t=r[0]*r[0]+r[1]*r[1];return[(n[0]*r[0]+n[1]*r[1])/t,(n[1]*r[0]-n[0]*r[1])/t]}(h[0],h[1]);return[i(j[1],j[0])/-1,2*o(c(-.5*f(p*j[0]*j[0]+p*j[1]*j[1])))-w]};var Wn=N(1-1/3)*S,Ln=ln(0);function On(n){var r=Wn*k,t=cn(P,r)[0]-cn(-P,r)[0],o=Ln(0,r)[1],i=cn(0,r)[1],u=A-i,c=b/n,f=4/b,p=o+u*u*4/b;function g(g,s){var h,j=e(s);if(j>r){var d=l(n-1,v(0,a((g+P)/c)));(h=cn(g+=P*(n-1)/n-d*c,j))[0]=h[0]*b/t-b*(n-1)/(2*n)+d*b/n,h[1]=o+4*(h[1]-i)*u/b,s<0&&(h[1]=-h[1])}else h=Ln(g,s);return h[0]*=f,h[1]/=p,h}return g.invert=function(r,g){r/=f;var s=e(g*=p);if(s>o){var h=l(n-1,v(0,a((r+P)/c)));r=(r+P*(n-1)/n-h*c)*t/b;var j=cn.invert(r,.25*(s-o)*b/u+i);return j[0]-=P*(n-1)/n-h*c,g<0&&(j[1]=-j[1]),j}return Ln.invert(r,g)},g}function _n(n,r){return[n,1&r?90-d:Wn]}function Jn(n,r){return[n,1&r?-90+d:-Wn]}function Kn(n){return[n[0]*(1-d),n[1]]}function Vn(n){var r,t=1+n,o=N(h(1/t)),c=2*R(P/(r=P+4*o*t)),a=.5*c*(t+R(n*(2+n))),f=n*n,v=t*t;function l(l,p){var g,s,j=1-h(p);if(j&&j<2){var d,y=w-p,M=25;do{var E=h(y),A=u(y),b=o+i(E,t-A),S=1+v-2*t*A;y-=d=(y-f*o-t*E+S*b-.5*j*r)/(2*t*E*b)}while(e(d)>m&&--M>0);g=c*R(S),s=l*b/P}else g=c*(n+j),s=l*o/P;return[g*h(s),a-g*u(s)]}return l.invert=function(n,e){var u=n*n+(e-=a)*e,l=(1+v-u/(c*c))/(2*t),p=z(l),g=h(p),s=o+i(g,t-l);return[N(n/R(u))*P/s,N(1-2*(p-f*o-t*g+(1+v-2*t*l)*s)/r)]},l}var Xn=.7109889596207567,Yn=.0528035274542;function Zn(n,r){return r>-Xn?((n=J(n,r))[1]+=Yn,n):Z(n,r)}function $n(n,r){return e(r)>Xn?((n=J(n,r))[1]-=r>0?Yn:-Yn,n):Z(n,r)}function nr(n,r,t,e){var o=R(4*P/(2*t+(1+n-r/2)*h(2*t)+(n+r)/2*h(4*t)+r/2*h(6*t))),i=R(e*h(t)*R((1+n*u(2*t)+r*u(4*t))/(1+n+r))),c=t*f(1);function a(t){return R(1+n*u(2*t)+r*u(4*t))}function f(e){var o=e*t;return(2*o+(1+n-r/2)*h(2*o)+(n+r)/2*h(4*o)+r/2*h(6*o))/t}function v(n){return a(n)*h(n)}var l=function(n,r){var e=t*W(f,c*h(r)/t,r/P);isNaN(e)&&(e=t*s(r));var v=o*a(e);return[v*i*n/P*u(e),v/i*h(e)]};return l.invert=function(n,r){var e=W(v,r*i/o);return[n*P/(u(e)*o*i*a(e)),N(t*f(e/t)/c)]},0===t&&(o=R(e/P),(l=function(n,r){return[n*o,h(r)/o]}).invert=function(n,r){return[n/o,N(r*o)]}),l}function rr(n,r,t,e,o,i,u,c,a,f,v){if(v.nanEncountered)return NaN;var l,p,g,s,h,j,d,m,P,w;if(p=n(r+.25*(l=t-r)),g=n(t-.25*l),isNaN(p))v.nanEncountered=!0;else{if(!isNaN(g))return w=((j=(s=l*(e+4*p+o)/12)+(h=l*(o+4*g+i)/12))-u)/15,f>a?(v.maxDepthCount++,j+w):Math.abs(w)<c?j+w:(m=rr(n,r,d=r+.5*l,e,p,o,s,.5*c,a,f+1,v),isNaN(m)?(v.nanEncountered=!0,NaN):(P=rr(n,d,t,o,g,i,h,.5*c,a,f+1,v),isNaN(P)?(v.nanEncountered=!0,NaN):m+P));v.nanEncountered=!0}}function tr(n,r,t,e,o){void 0===e&&(e=1e-8),void 0===o&&(o=20);var i=n(r),u=n(.5*(r+t)),c=n(t);return rr(n,r,t,i,u,c,(i+4*u+c)*(t-r)/6,e,o,1,{maxDepthCount:0,nanEncountered:!1})}function er(n,r,t){function o(t){return n+(1-n)*p(1-p(t,r),1/r)}function i(n){return tr(o,0,n,1e-4)}for(var u=1/i(1),c=1e3,a=(1+1e-8)*u,f=[],v=0;v<=c;v++)f.push(i(v/c)*a);function l(n){var r=0,t=c,e=500;do{f[e]>n?t=e:r=e,e=r+t>>1}while(e>r);var o=f[e+1]-f[e];return o&&(o=(n-f[e+1])/o),(e+1+o)/c}var g=2*l(1)/P*u/t,j=function(n,r){var t=l(e(h(r))),i=o(t)*n;return t/=g,[i,r>=0?t:-t]};return j.invert=function(n,r){var t;return e(r*=g)<1&&(t=s(r)*N(i(e(r))*u)),[n/o(e(r)),t]},j}function or(n,r){return e(n[0]-r[0])<d&&e(n[1]-r[1])<d}function ir(n,r){for(var t,e,o,i=-1,u=n.length,c=n[0],a=[];++i<u;){e=((t=n[i])[0]-c[0])/r,o=(t[1]-c[1])/r;for(var f=0;f<r;++f)a.push([c[0]+f*e,c[1]+f*o]);c=t}return a.push(t),a}function ur(n,e,o){var i,u;function c(r,t){for(var o=t<0?-1:1,i=e[+(t<0)],u=0,c=i.length-1;u<c&&r>i[u][2][0];++u);var a=n(r-i[u][1][0],t);return a[0]+=n(i[u][1][0],o*t>o*i[u][0][1]?i[u][0][1]:t)[0],a}o?c.invert=o(c):n.invert&&(c.invert=function(r,t){for(var o=u[+(t<0)],i=e[+(t<0)],a=0,f=o.length;a<f;++a){var v=o[a];if(v[0][0]<=r&&r<v[1][0]&&v[0][1]<=t&&t<v[1][1]){var l=n.invert(r-n(i[a][1][0],0)[0],t);return l[0]+=i[a][1][0],or(c(l[0],l[1]),[r,t])?l:null}}});var a=r.geoProjection(c),f=a.stream;return a.stream=function(n){var t=a.rotate(),e=f(n),o=(a.rotate([0,0]),f(n));return a.rotate(t),e.sphere=function(){r.geoStream(i,o)},e},a.lobes=function(r){return arguments.length?(i=function(n){var r,e,o,i,u,c,a,f=[],v=n[0].length;for(a=0;a<v;++a)e=(r=n[0][a])[0][0],o=r[0][1],i=r[1][1],u=r[2][0],c=r[2][1],f.push(ir([[e+d,o+d],[e+d,i-d],[u-d,i-d],[u-d,c+d]],30));for(a=n[1].length-1;a>=0;--a)e=(r=n[1][a])[0][0],o=r[0][1],i=r[1][1],u=r[2][0],c=r[2][1],f.push(ir([[u-d,c-d],[u-d,i+d],[e+d,i+d],[e+d,o-d]],30));return{type:"Polygon",coordinates:[t.merge(f)]}}(r),e=r.map((function(n){return n.map((function(n){return[[n[0][0]*k,n[0][1]*k],[n[1][0]*k,n[1][1]*k],[n[2][0]*k,n[2][1]*k]]}))})),u=e.map((function(r){return r.map((function(r){var t,e=n(r[0][0],r[0][1])[0],o=n(r[2][0],r[2][1])[0],i=n(r[1][0],r[0][1])[1],u=n(r[1][0],r[1][1])[1];return i>u&&(t=i,i=u,u=t),[[e,i],[o,u]]}))})),a):e.map((function(n){return n.map((function(n){return[[n[0][0]*S,n[0][1]*S],[n[1][0]*S,n[1][1]*S],[n[2][0]*S,n[2][1]*S]]}))}))},null!=e&&a.lobes(e),a}Zn.invert=function(n,r){return r>-Xn?J.invert(n,r-Yn):Z.invert(n,r)},$n.invert=function(n,r){return e(r)>Xn?J.invert(n,r+(r>0?Yn:-Yn)):Z.invert(n,r)};var cr=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];var ar=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];var fr=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];var vr=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];var lr=[[[[-180,35],[-30,90],[0,35]],[[0,35],[30,90],[180,35]]],[[[-180,-10],[-102,-90],[-65,-10]],[[-65,-10],[5,-90],[77,-10]],[[77,-10],[103,-90],[180,-10]]]];var pr=[[[[-180,0],[-110,90],[-40,0]],[[-40,0],[0,90],[40,0]],[[40,0],[110,90],[180,0]]],[[[-180,0],[-110,-90],[-40,0]],[[-40,0],[0,-90],[40,0]],[[40,0],[110,-90],[180,0]]]];function gr(n,r){return[3/b*n*R(P*P/3-r*r),r]}function sr(n){function r(r,t){if(e(e(t)-w)<d)return[0,t<0?-2:2];var o=h(t),i=p((1+o)/(1-o),n/2),c=.5*(i+1/i)+u(r*=n);return[2*h(r)/c,(i-1/i)/c]}return r.invert=function(r,t){var o=e(t);if(e(o-2)<d)return r?null:[0,s(t)*w];if(o>2)return null;var u=(r/=2)*r,c=(t/=2)*t,a=2*t/(1+u+c);return a=p((1+a)/(1-a),1/n),[i(2*r,1-u-c)/n,N((a-1)/(a+1))]},r}gr.invert=function(n,r){return[b/3*n/R(P*P/3-r*r),r]};var hr=P/E;function jr(n,r){return[n*(1+R(u(r)))/2,r/(u(r/2)*u(n/6))]}function dr(n,r){var t=n*n,e=r*r;return[n*(.975534+e*(-.0143059*t-.119161+-.0547009*e)),r*(1.00384+t*(.0802894+-.02855*e+199025e-9*t)+e*(.0998909+-.0491032*e))]}function mr(n,r){return[h(n)/u(r),j(r)*u(n)]}function Pr(n){var r=u(n),t=j(y+n/2);function o(o,i){var u=i-n,c=e(u)<d?o*r:e(c=y+i/2)<d||e(e(c)-w)<d?0:o*u/f(j(c)/t);return[c,u]}return o.invert=function(o,i){var u,c=i+n;return[e(i)<d?o/r:e(u=y+c/2)<d||e(e(u)-w)<d?0:o*f(j(u)/t)/i,c]},o}function wr(n,r){return[n,1.25*f(j(y+.4*r))]}jr.invert=function(n,r){var t=e(n),o=e(r),i=d,c=w;o<hr?c*=o/hr:i+=6*z(hr/o);for(var a=0;a<25;a++){var f=h(c),v=R(u(c)),l=h(c/2),p=u(c/2),g=h(i/6),s=u(i/6),j=.5*i*(1+v)-t,m=c/(p*s)-o,P=v?-.25*i*f/v:0,y=.5*(1+v),M=(1+.5*c*l/p)/(p*s),E=c/p*(g/6)/(s*s),A=P*E-M*y,b=(j*E-m*y)/A,S=(m*P-j*M)/A;if(c-=b,i-=S,e(b)<d&&e(S)<d)break}return[n<0?-i:i,r<0?-c:c]},dr.invert=function(n,r){var t=s(n)*P,o=r/2,i=50;do{var u=t*t,c=o*o,a=t*o,f=t*(.975534+c*(-.0143059*u-.119161+-.0547009*c))-n,v=o*(1.00384+u*(.0802894+-.02855*c+199025e-9*u)+c*(.0998909+-.0491032*c))-r,l=.975534-c*(.119161+3*u*.0143059+.0547009*c),p=-a*(.238322+.2188036*c+.0286118*u),g=a*(.1605788+7961e-7*u+-.0571*c),h=1.00384+u*(.0802894+199025e-9*u)+c*(3*(.0998909-.02855*u)-.245516*c),j=p*g-h*l,m=(v*p-f*h)/j,w=(f*g-v*l)/j;t-=m,o-=w}while((e(m)>d||e(w)>d)&&--i>0);return i&&[t,o]},mr.invert=function(n,r){var t=n*n,e=r*r+1,o=t+e,i=n?M*R((o-R(o*o-4*t))/t):1/R(e);return[N(n*i),s(r)*z(i)]},wr.invert=function(n,r){return[n,2.5*o(c(.8*r))-.625*P]};var yr=[[.9972523,0],[.0052513,-.0041175],[.0074606,.0048125],[-.0153783,-.1968253],[.0636871,-.1408027],[.3660976,-.2937382]],Mr=[[.98879,0],[0,0],[-.050909,0],[0,0],[.075528,0]],Er=[[.984299,0],[.0211642,.0037608],[-.1036018,-.0575102],[-.0329095,-.0320119],[.0499471,.1223335],[.026046,.0899805],[7388e-7,-.1435792],[.0075848,-.1334108],[-.0216473,.0776645],[-.0225161,.0853673]],Ar=[[.9245,0],[0,0],[.01943,0]],br=[[.721316,0],[0,0],[-.00881625,-.00617325]];function Sr(n,t){var c=r.geoProjection(function(n){var r=n.length-1;function t(t,e){for(var o,i=u(e),c=2/(1+i*u(t)),a=c*i*h(t),f=c*h(e),v=r,l=n[v],p=l[0],g=l[1];--v>=0;)p=(l=n[v])[0]+a*(o=p)-f*g,g=l[1]+a*g+f*o;return[p=a*(o=p)-f*g,g=a*g+f*o]}return t.invert=function(t,c){var a=20,f=t,v=c;do{for(var l,p=r,g=n[p],s=g[0],j=g[1],m=0,P=0;--p>=0;)m=s+f*(l=m)-v*P,P=j+f*P+v*l,s=(g=n[p])[0]+f*(l=s)-v*j,j=g[1]+f*j+v*l;var w,y,M=(m=s+f*(l=m)-v*P)*m+(P=j+f*P+v*l)*P;f-=w=((s=f*(l=s)-v*j-t)*m+(j=f*j+v*l-c)*P)/M,v-=y=(j*m-s*P)/M}while(e(w)+e(y)>d*d&&--a>0);if(a){var E=R(f*f+v*v),A=2*o(.5*E),b=h(A);return[i(f*b,E*u(A)),E?N(v*b/E):0]}},t}(n)).rotate(t).clipAngle(90),a=r.geoRotation(t),f=c.center;return delete c.rotate,c.center=function(n){return arguments.length?f(a(n)):a.invert(f())},c}var kr=R(6),Nr=R(7);function zr(n,r){var t=N(7*h(r)/(3*kr));return[kr*n*(2*u(2*t/3)-1)/Nr,9*h(t/3)/Nr]}function Rr(n,r){for(var t,o=(1+M)*h(r),i=r,c=0;c<25&&(i-=t=(h(i/2)+h(i)-o)/(.5*u(i/2)+u(i)),!(e(t)<d));c++);return[n*(1+2*u(i)/u(i/2))/(3*E),2*R(3)*h(i/2)/R(2+E)]}function qr(n,r){for(var t,o=R(6/(4+P)),i=(1+P/4)*h(r),c=r/2,a=0;a<25&&(c-=t=(c/2+h(c)-i)/(.5+u(c)),!(e(t)<d));a++);return[o*(.5+u(c))*n/1.5,o*c]}function xr(n,r){var t=r*r,e=t*t,o=t*e;return[n*(.84719-.13063*t+o*o*(.05494*t-.04515-.02326*e+.00331*o)),r*(1.01183+e*e*(.01926*t-.02625-.00396*e))]}function Gr(n,r){return[n*(1+u(r))/2,2*(r-j(r/2))]}zr.invert=function(n,r){var t=3*N(r*Nr/9);return[n*Nr/(kr*(2*u(2*t/3)-1)),N(3*h(t)*kr/7)]},Rr.invert=function(n,r){var t=r*R(2+E)/(2*R(3)),e=2*N(t);return[3*E*n/(1+2*u(e)/u(e/2)),N((t+h(e))/(1+M))]},qr.invert=function(n,r){var t=R(6/(4+P)),o=r/t;return e(e(o)-w)<d&&(o=o<0?-w:w),[1.5*n/(t*(.5+u(o))),N((o/2+h(o))/(1+P/4))]},xr.invert=function(n,r){var t,o,i,u,c=r,a=25;do{c-=t=(c*(1.01183+(i=(o=c*c)*o)*i*(.01926*o-.02625-.00396*i))-r)/(1.01183+i*i*(.21186*o-.23625+-.05148*i))}while(e(t)>m&&--a>0);return[n/(.84719-.13063*(o=c*c)+(u=o*(i=o*o))*u*(.05494*o-.04515-.02326*i+.00331*u)),c]},Gr.invert=function(n,r){for(var t=r/2,o=0,i=1/0;o<10&&e(i)>d;++o){var c=u(r/2);r-=i=(r-j(r/2)-t)/(1-.5/(c*c))}return[2*n/(1+u(r)),r]};var Cr=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function Dr(n,r){var t=h(r),o=u(r),i=s(n);if(0===n||e(r)===w)return[0,r];if(0===r)return[n,0];if(e(n)===w)return[n*o,w*t];var c=P/(2*n)-2*n/P,a=2*r/P,f=(1-a*a)/(t-a),v=c*c,l=f*f,p=1+v/l,g=1+l/v,j=(c*t/f-c/2)/p,d=(l*t/v+f/2)/g,m=d*d-(l*t*t/v+f*t-1)/g;return[w*(j+R(j*j+o*o/p)*i),w*(d+R(m<0?0:m)*s(-r*c)*i)]}Dr.invert=function(n,r){var t=(n/=w)*n,e=t+(r/=w)*r,o=P*P;return[n?(e-1+R((1-e)*(1-e)+4*t))/(2*n)*w:0,W((function(n){return e*(P*h(n)-2*n)*P+4*n*n*(r-h(n))+2*P*n-o*r}),0)]};var Qr=1.0148,Hr=.23185,Ir=-.14499,Br=.02406,Fr=Qr,Tr=5*Hr,Ur=7*Ir,Wr=9*Br,Lr=1.790857183;function Or(n,r){var t=r*r;return[n,r*(Qr+t*t*(Hr+t*(Ir+Br*t)))]}function _r(n,r){if(e(r)<d)return[n,0];var t=j(r),o=n*h(r);return[h(o)/t,r+(1-u(o))/t]}function Jr(n,r){var t=Vr(n[1],n[0]),e=Vr(r[1],r[0]),o=function(n,r){return i(n[0]*r[1]-n[1]*r[0],n[0]*r[0]+n[1]*r[1])}(t,e),c=Xr(t)/Xr(e);return Kr([1,0,n[0][0],0,1,n[0][1]],Kr([c,0,0,0,c,0],Kr([u(o),h(o),0,-h(o),u(o),0],[1,0,-r[0][0],0,1,-r[0][1]])))}function Kr(n,r){return[n[0]*r[0]+n[1]*r[3],n[0]*r[1]+n[1]*r[4],n[0]*r[2]+n[1]*r[5]+n[2],n[3]*r[0]+n[4]*r[3],n[3]*r[1]+n[4]*r[4],n[3]*r[2]+n[4]*r[5]+n[5]]}function Vr(n,r){return[n[0]-r[0],n[1]-r[1]]}function Xr(n){return R(n[0]*n[0]+n[1]*n[1])}function Yr(n,t){function e(n,r){var e,o=t(n,r),i=o.project([n*S,r*S]);return(e=o.transform)?[e[0]*i[0]+e[1]*i[1]+e[2],-(e[3]*i[0]+e[4]*i[1]+e[5])]:(i[1]=-i[1],i)}function o(n,r){var e=n.project.invert,i=n.transform,u=r;if(i&&(i=function(n){var r=1/(n[0]*n[4]-n[1]*n[3]);return[r*n[4],-r*n[1],r*(n[1]*n[5]-n[2]*n[4]),-r*n[3],r*n[0],r*(n[2]*n[3]-n[0]*n[5])]}(i),u=[i[0]*u[0]+i[1]*u[1]+i[2],i[3]*u[0]+i[4]*u[1]+i[5]]),e&&n===function(n){return t(n[0]*k,n[1]*k)}(c=e(u)))return c;for(var c,a=n.children,f=0,v=a&&a.length;f<v;++f)if(c=o(a[f],r))return c}!function n(r,t){if(r.edges=function(n){for(var r=n.length,t=[],e=n[r-1],o=0;o<r;++o)t.push([e,e=n[o]]);return t}(r.face),t.face){var e=r.shared=function(n,r){for(var t,e,o=n.length,i=null,u=0;u<o;++u){t=n[u];for(var c=r.length;--c>=0;)if(e=r[c],t[0]===e[0]&&t[1]===e[1]){if(i)return[i,t];i=t}}}(r.face,t.face),o=Jr(e.map(t.project),e.map(r.project));r.transform=t.transform?Kr(t.transform,o):o;for(var i=t.edges,u=0,c=i.length;u<c;++u)$r(e[0],i[u][1])&&$r(e[1],i[u][0])&&(i[u]=r),$r(e[0],i[u][0])&&$r(e[1],i[u][1])&&(i[u]=r);for(u=0,c=(i=r.edges).length;u<c;++u)$r(e[0],i[u][0])&&$r(e[1],i[u][1])&&(i[u]=t),$r(e[0],i[u][1])&&$r(e[1],i[u][0])&&(i[u]=t)}else r.transform=t.transform;r.children&&r.children.forEach((function(t){n(t,r)}));return r}(n,{transform:null}),nt(n)&&(e.invert=function(r,t){var e=o(n,[r,-t]);return e&&(e[0]*=k,e[1]*=k,e)});var i=r.geoProjection(e),u=i.stream;return i.stream=function(r){var t=i.rotate(),e=u(r),o=(i.rotate([0,0]),u(r));return i.rotate(t),e.sphere=function(){o.polygonStart(),o.lineStart(),Zr(o,n),o.lineEnd(),o.polygonEnd()},e},i.angle(-30)}function Zr(n,t,o){var i,u,c=t.edges,a=c.length,f={type:"MultiPoint",coordinates:t.face},v=t.face.filter((function(n){return 90!==e(n[1])})),l=r.geoBounds({type:"MultiPoint",coordinates:v}),p=!1,g=-1,s=l[1][0]-l[0][0],h=180===s||360===s?[(l[0][0]+l[1][0])/2,(l[0][1]+l[1][1])/2]:r.geoCentroid(f);if(o)for(;++g<a&&c[g]!==o;);++g;for(var j=0;j<a;++j)u=c[(j+g)%a],Array.isArray(u)?(p||(n.point((i=r.geoInterpolate(u[0],h)(d))[0],i[1]),p=!0),n.point((i=r.geoInterpolate(u[1],h)(d))[0],i[1])):(p=!1,u!==o&&Zr(n,u,t))}function $r(n,r){return n&&r&&n[0]===r[0]&&n[1]===r[1]}function nt(n){return n.project.invert||n.children&&n.children.some(nt)}Or.invert=function(n,r){r>Lr?r=Lr:r<-1.790857183&&(r=-1.790857183);var t,o=r;do{var i=o*o;o-=t=(o*(Qr+i*i*(Hr+i*(Ir+Br*i)))-r)/(Fr+i*i*(Tr+i*(Ur+Wr*i)))}while(e(t)>d);return[n,o]},_r.invert=function(n,r){if(e(r)<d)return[n,0];var t,o=n*n+r*r,i=.5*r,c=10;do{var a=j(i),f=1/u(i),v=o-2*r*i+i*i;i-=t=(a*v+2*(i-r))/(2+v*f*f+2*(i-r)*a)}while(e(t)>d&&--c>0);return a=j(i),[(e(r)<e(i+1/a)?N(n*a):s(r)*s(n)*(z(e(n*a))+w))/h(i),i]};var rt=[[0,90],[-90,0],[0,0],[90,0],[180,0],[0,-90]],tt=[[0,2,1],[0,3,2],[5,1,2],[5,2,3],[0,1,4],[0,4,3],[5,4,1],[5,3,4]].map((function(n){return n.map((function(n){return rt[n]}))}));var et=2/R(3);function ot(n,r){var t=cn(n,r);return[t[0]*et,t[1]]}function it(n,r){for(var t=0,e=n.length,o=0;t<e;++t)o+=n[t]*r[t];return o}function ut(n){return[i(n[1],n[0])*S,N(v(-1,l(1,n[2])))*S]}function ct(n){var r=n[0]*k,t=n[1]*k,e=u(t);return[e*u(r),e*h(r),h(t)]}function at(n){var t=n(w,0)[0]-n(-w,0)[0];function o(r,o){var i=e(r)<w,u=n(i?r:r>0?r-P:r+P,o),c=(u[0]-u[1])*M,a=(u[0]+u[1])*M;if(i)return[c,a];var f=t*M,v=c>0^a>0?-1:1;return[v*c-s(a)*f,v*a-s(c)*f]}return n.invert&&(o.invert=function(r,o){var i=(r+o)*M,u=(o-r)*M,c=e(i)<.5*t&&e(u)<.5*t;if(!c){var a=t*M,f=i>0^u>0?-1:1,v=-f*r+(u>0?1:-1)*a,l=-f*o+(i>0?1:-1)*a;i=(-v-l)*M,u=(v-l)*M}var p=n.invert(i,u);return c||(p[0]+=i>0?P:-P),p}),r.geoProjection(o).rotate([-90,-90,45]).clipAngle(179.999)}function ft(n){var r=h(n);function t(t,e){var i=r?j(t*r/2)/r:t/2;if(!e)return[2*i,-n];var c=2*o(i*h(e)),a=1/j(e);return[h(c)*a,e+(1-u(c))*a-n]}return t.invert=function(t,i){if(e(i+=n)<d)return[r?2*o(r*t/2)/r:t,0];var c,a=t*t+i*i,f=0,v=10;do{var l=j(f),p=1/u(f),g=a-2*i*f+f*f;f-=c=(l*g+2*(f-i))/(2+g*p*p+2*(f-i)*l)}while(e(c)>d&&--v>0);var s=t*(l=j(f)),m=j(e(i)<e(f+1/l)?.5*N(s):.5*z(s)+P/4)/h(f);return[r?2*o(r*m)/r:2*m,f]},t}ot.invert=function(n,r){return cn.invert(n/et,r)};var vt=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];function lt(n,r){var t,o=l(18,36*e(r)/P),i=a(o),u=o-i,c=(t=vt[i])[0],f=t[1],v=(t=vt[++i])[0],p=t[1],g=(t=vt[l(19,++i)])[0],h=t[1];return[n*(v+u*(g-c)/2+u*u*(g-2*v+c)/2),s(r)*(p+u*(h-f)/2+u*u*(h-2*p+f)/2)]}function pt(n,r){var t=function(n){function r(r,t){var e=u(t),o=(n-1)/(n-e*u(r));return[o*e*h(r),o*h(t)]}return r.invert=function(r,t){var e=r*r+t*t,o=R(e),u=(n-R(1-e*(n+1)/(n-1)))/((n-1)/o+o/(n-1));return[i(r*u,o*R(1-u*u)),o?N(t*u/o):0]},r}(n);if(!r)return t;var e=u(r),o=h(r);function c(r,i){var u=t(r,i),c=u[1],a=c*o/(n-1)+e;return[u[0]*e/a,c/a]}return c.invert=function(r,i){var u=(n-1)/(n-1-i*o);return t.invert(u*r,u*i*e)},c}function gt(n,r){var t=j(r/2),e=h(y*t);return[n*(.74482-.34588*e*e),1.70711*t]}function st(n,t,e){var o=r.geoInterpolate(t,e),i=o(.5),u=r.geoRotation([-i[0],-i[1]])(t),c=o.distance/2,a=-N(h(u[1]*k)/h(c)),f=[-i[0],-i[1],-(u[0]>0?P-a:a)*S],v=r.geoProjection(n(c)).rotate(f),l=r.geoRotation(f),p=v.center;return delete v.rotate,v.center=function(n){return arguments.length?p(l(n)):l.invert(p())},v.clipAngle(90)}function ht(n){var t=u(n);function e(n,e){var o=r.geoGnomonicRaw(n,e);return o[0]*=t,o}return e.invert=function(n,e){return r.geoGnomonicRaw.invert(n/t,e)},e}function jt(n){if(!(n*=2))return r.geoAzimuthalEquidistantRaw;var t=-n/2,e=-t,o=n*n,c=j(e),a=.5/h(e);function f(r,i){var c=z(u(i)*u(r-t)),a=z(u(i)*u(r-e));return[((c*=c)-(a*=a))/(2*n),(i<0?-1:1)*R(4*o*a-(o-c+a)*(o-c+a))/(2*n)]}return f.invert=function(n,r){var o,f,v=r*r,l=u(R(v+(o=n+t)*o)),p=u(R(v+(o=n+e)*o));return[i(f=l-p,o=(l+p)*c),(r<0?-1:1)*z(R(o*o+f*f)*a)]},f}function dt(n,r){if(e(r)<d)return[n,0];var t=e(r/w),o=N(t);if(e(n)<d||e(e(r)-w)<d)return[0,s(r)*P*j(o/2)];var i=u(o),c=e(P/n-n/P)/2,a=c*c,f=i/(t+i-1),v=f*(2/t-1),l=v*v,p=l+a,g=f-l,h=a+f;return[s(n)*P*(c*g+R(a*g*g-p*(f*f-l)))/p,s(r)*P*(v*h-c*R((a+1)*p-h*h))/p]}function mt(n,r){if(e(r)<d)return[n,0];var t=e(r/w),o=N(t);if(e(n)<d||e(e(r)-w)<d)return[0,s(r)*P*j(o/2)];var i=u(o),c=e(P/n-n/P)/2,a=c*c,f=i*(R(1+a)-c*i)/(1+a*t*t);return[s(n)*P*f,s(r)*P*R(1-f*(2*c+f))]}function Pt(n,r){if(e(r)<d)return[n,0];var t=r/w,o=N(t);if(e(n)<d||e(e(r)-w)<d)return[0,P*j(o/2)];var i=(P/n-n/P)/2,c=t/(1+u(o));return[P*(s(n)*R(i*i+1-c*c)-i),P*c]}function wt(n,r){if(!r)return[n,0];var t=e(r);if(!n||t===w)return[0,r];var o=t/w,i=o*o,u=(8*o-i*(i+2)-5)/(2*i*(o-1)),c=u*u,a=o*u,f=i+c+2*a,v=o+3*u,l=n/w,p=l+1/l,g=s(e(n)-w)*R(p*p-4),h=g*g,j=(g*(f+c-1)+2*R(f*(i+c*h-1)+(1-i)*(i*(v*v+4*c)+12*a*c+4*c*c)))/(4*f+h);return[s(n)*w*j,s(r)*w*R(1+g*e(j)-j*j)]}function yt(n,r,t,e){var o=P/3;n=v(n,d),r=v(r,d),n=l(n,w),r=l(r,P-d),t=v(t,0),t=l(t,100-d);var c=(e=v(e,d))/100,a=z((t/100+1)*u(o))/o,f=h(n)/h(a*w),p=r/P,g=R(c*h(n/2)/h(r/2));return function(n,r,t,e,o){function c(i,c){var a=t*h(e*c),f=R(1-a*a),v=R(2/(1+f*u(i*=o)));return[n*f*v*h(i),r*a*v]}return c.invert=function(u,c){var a=u/n,f=c/r,v=R(a*a+f*f),l=2*N(v/2);return[i(u*j(l),n*v)/o,v&&N(c*h(l)/(r*t*v))/e]},c}(g/R(p*f*a),1/(g*R(p*f*a)),f,a,p)}function Mt(){var n=65*k,t=60*k,e=20,o=200,i=r.geoProjectionMutator(yt),u=i(n,t,e,o);return u.poleline=function(r){return arguments.length?i(n=+r*k,t,e,o):n*S},u.parallels=function(r){return arguments.length?i(n,t=+r*k,e,o):t*S},u.inflation=function(r){return arguments.length?i(n,t,e=+r,o):e},u.ratio=function(r){return arguments.length?i(n,t,e,o=+r):o},u.scale(163.775)}vt.forEach((function(n){n[1]*=1.593415793900743})),lt.invert=function(n,r){var t=90*r,o=l(18,e(t/5)),i=v(0,a(o));do{var u=vt[i][1],c=vt[i+1][1],f=vt[l(19,i+2)][1],p=f-u,g=f-2*c+u,h=2*(e(r)-c)/p,j=g/p,d=h*(1-j*h*(1-2*j*h));if(d>=0||1===i){t=(r>=0?5:-5)*(d+o);var P,w=50;do{d=(o=l(18,e(t)/5))-(i=a(o)),u=vt[i][1],c=vt[i+1][1],f=vt[l(19,i+2)][1],t-=(P=s(r)*(c+d*(f-u)/2+d*d*(f-2*c+u)/2)-r)*S}while(e(P)>m&&--w>0);break}}while(--i>=0);var y=vt[i][0],M=vt[i+1][0],E=vt[l(19,i+2)][0];return[n/(M+d*(E-y)/2+d*d*(E-2*M+y)/2),t*k]},gt.invert=function(n,r){var t=r/1.70711,e=h(y*t);return[n/(.74482-.34588*e*e),2*o(t)]},dt.invert=function(n,r){if(e(r)<d)return[n,0];if(e(n)<d)return[0,w*h(2*o(r/P))];var t=(n/=P)*n,i=(r/=P)*r,c=t+i,a=c*c,f=-e(r)*(1+c),v=f-2*i+t,l=-2*f+1+2*i+a,p=i/l+(2*v*v*v/(l*l*l)-9*f*v/(l*l))/27,g=(f-v*v/(3*l))/l,j=2*R(-g/3),m=z(3*p/(g*j))/3;return[P*(c-1+R(1+2*(t-i)+a))/(2*n),s(r)*P*(-j*u(m+P/3)-v/(3*l))]},mt.invert=function(n,r){if(!n)return[0,w*h(2*o(r/P))];var t=e(n/P),u=(1-t*t-(r/=P)*r)/(2*t),c=R(u*u+1);return[s(n)*P*(c-u),s(r)*w*h(2*i(R((1-2*u*t)*(u+c)-t),R(c+u+t)))]},Pt.invert=function(n,r){if(!r)return[n,0];var t=r/P,e=(P*P*(1-t*t)-n*n)/(2*P*n);return[n?P*(s(n)*R(e*e+1)-e):0,w*h(2*o(t))]},wt.invert=function(n,r){var t;if(!n||!r)return[n,r];var o=s(r);r=e(r)/P;var i=s(n)*n/w,u=(i*i-1+4*r*r)/e(i),c=u*u,a=r*(2-(r>.5?l(r,e(n)):0)),f=n*n+r*r,v=50;do{var p=a*a,g=(8*a-p*(p+2)-5)/(2*p*(a-1)),h=(3*a-p*a-10)/(2*p*a),j=g*g,m=a*g,y=a+g,M=y*y,E=a+3*g,A=-2*y*(4*m*j+(1-4*p+3*p*p)*(1+h)+j*(14*p-6-c+(8*p-8-2*c)*h)+m*(12*p-8+(10*p-10-c)*h)),b=R(M*(p+j*c-1)+(1-p)*(p*(E*E+4*j)+j*(12*m+4*j)));a-=t=(u*(M+j-1)+2*b-i*(4*M+c))/(u*(2*g*h+2*y*(1+h))+A/b-8*y*(u*(-1+j+M)+2*b)*(1+h)/(c+4*M))}while(t*f*f>d&&--v>0);return[s(n)*(R(u*u+4)+u)*P/4,o*w*a]};var Et=4*P+3*R(3),At=2*R(2*P*R(3)/Et),bt=_(At*R(3)/P,At,Et/6);function St(n,r){return[n*R(1-3*r*r/(P*P)),r]}function kt(n,r){var t=u(r),e=u(n)*t,o=1-e,c=u(n=i(h(n)*t,-h(r))),a=h(n);return[a*(t=R(1-e*e))-c*o,-c*t-a*o]}function Nt(n,r){var t=C(n,r);return[(t[0]+n/w)/2,(t[1]+r)/2]}St.invert=function(n,r){return[n/R(1-3*r*r/(P*P)),r]},kt.invert=function(n,r){var t=(n*n+r*r)/-2,e=R(-t*(2+t)),o=r*t+n*e,u=n*t-r*e,c=R(u*u+o*o);return[i(e*o,c*(1+t)),c?-N(e*u/c):0]},Nt.invert=function(n,r){var t=n,o=r,i=25;do{var c,a=u(o),f=h(o),v=h(2*o),l=f*f,p=a*a,g=h(t),s=u(t/2),j=h(t/2),m=j*j,P=1-p*s*s,y=P?z(a*s)*R(c=1/P):c=0,M=.5*(2*y*a*j+t/w)-n,E=.5*(y*f+o)-r,A=.5*c*(p*m+y*a*s*l)+.5/w,b=c*(g*v/4-y*f*j),S=.125*c*(v*j-y*f*p*g),k=.5*c*(l*s+y*m*a)+.5,N=b*S-k*A,q=(E*b-M*k)/N,x=(M*S-E*A)/N;t-=q,o-=x}while((e(q)>d||e(x)>d)&&--i>0);return[t,o]},n.projection("airy",(function(){var n=w,t=r.geoProjectionMutator(G),e=t(n);return e.radius=function(r){return arguments.length?t(n=r*k):n*S},e.scale(179.976).clipAngle(147)})),n.projection("aitoff",(function(){return r.geoProjection(C).scale(152.63)})),n.projection("armadillo",(function(){var n=20*k,t=n>=0?1:-1,e=j(t*n),o=r.geoProjectionMutator(D),c=o(n),a=c.stream;return c.parallel=function(r){return arguments.length?(e=j((t=(n=r*k)>=0?1:-1)*n),o(n)):n*S},c.stream=function(r){var o=c.rotate(),f=a(r),v=(c.rotate([0,0]),a(r)),l=c.precision();return c.rotate(o),f.sphere=function(){v.polygonStart(),v.lineStart();for(var r=-180*t;t*r<180;r+=90*t)v.point(r,90*t);if(n)for(;t*(r-=3*t*l)>=-180;)v.point(r,t*-i(u(r*k/2),e)*S);v.lineEnd(),v.polygonEnd()},f},c.scale(218.695).center([0,28.0974])})),n.projection("august",(function(){return r.geoProjection(Q).scale(66.1603)})),n.projection("baker",(function(){return r.geoProjection(B).scale(112.314)})),n.projection("berghaus",(function(){var n=5,t=r.geoProjectionMutator(F),e=t(n),o=e.stream,c=.01,a=-u(c*k),f=h(c*k);return e.lobes=function(r){return arguments.length?t(n=+r):n},e.stream=function(r){var t=e.rotate(),v=o(r),l=(e.rotate([0,0]),o(r));return e.rotate(t),v.sphere=function(){l.polygonStart(),l.lineStart();for(var r=0,t=360/n,e=2*P/n,o=90-180/n,v=w;r<n;++r,o-=t,v-=e)l.point(i(f*u(v),a)*S,N(f*h(v))*S),o<-90?(l.point(-90,-180-o-c),l.point(-90,-180-o+c)):(l.point(90,o+c),l.point(90,o-c));l.lineEnd(),l.polygonEnd()},v},e.scale(87.8076).center([0,17.1875]).clipAngle(179.999)})),n.projection("bertin1953",(function(){return r.geoProjection(function(){var n=T(1.68,2);function r(r,t){if(r+t<-1.4){var e=(r-t+1.6)*(r+t+1.4)/8;r+=e,t-=.8*e*h(t+P/2)}var o=n(r,t),i=(1-u(r*t))/12;return o[1]<0&&(o[0]*=1+i),o[1]>0&&(o[1]*=1+i/1.5*o[0]*o[0]),o}return r.invert=L(r),r}()).rotate([-16.5,-42]).scale(176.57).center([7.93,.09])})),n.projection("boggs",(function(){return r.geoProjection(X).scale(160.857)})),n.projection("bonne",(function(){return Y($).scale(123.082).center([0,26.1441]).parallel(45)})),n.projection("bottomley",(function(){var n=.5,t=r.geoProjectionMutator(nn),e=t(n);return e.fraction=function(r){return arguments.length?t(n=+r):n},e.scale(158.837)})),n.projection("bromley",(function(){return r.geoProjection(rn).scale(152.63)})),n.projection("chamberlinAfrica",(function(){return function(n,t,e){var o=r.geoCentroid({type:"MultiPoint",coordinates:[n,t,e]}),i=[-o[0],-o[1]],c=r.geoRotation(i),a=function(n,r,t){for(var e,o=[[n[0],n[1],h(n[1]),u(n[1])],[r[0],r[1],h(r[1]),u(r[1])],[t[0],t[1],h(t[1]),u(t[1])]],i=o[2],c=0;c<3;++c,i=e)e=o[c],i.v=tn(e[1]-i[1],i[3],i[2],e[3],e[2],e[0]-i[0]),i.point=[0,0];var a=en(o[0].v[0],o[2].v[0],o[1].v[0]),f=en(o[0].v[0],o[1].v[0],o[2].v[0]),v=P-a;o[2].point[1]=0,o[0].point[0]=-(o[1].point[0]=o[0].v[0]/2);var l=[o[2].point[0]=o[0].point[0]+o[2].v[0]*u(a),2*(o[0].point[1]=o[1].point[1]=o[2].v[0]*h(a))];return function(n,r){var t,e=h(r),i=u(r),c=new Array(3);for(t=0;t<3;++t){var a=o[t];if(c[t]=tn(r-a[1],a[3],a[2],i,e,n-a[0]),!c[t][0])return a.point;c[t][1]=on(c[t][1]-a.v[1])}var p=l.slice();for(t=0;t<3;++t){var g=2==t?0:t+1,s=en(o[t].v[0],c[t][0],c[g][0]);c[t][1]<0&&(s=-s),t?1==t?(s=f-s,p[0]-=c[t][0]*u(s),p[1]-=c[t][0]*h(s)):(s=v-s,p[0]+=c[t][0]*u(s),p[1]+=c[t][0]*h(s)):(p[0]+=c[t][0]*u(s),p[1]-=c[t][0]*h(s))}return p[0]/=3,p[1]/=3,p}}(un(c(n)),un(c(t)),un(c(e)));a.invert=L(a);var f=r.geoProjection(a).rotate(i),v=f.center;return delete f.rotate,f.center=function(n){return arguments.length?v(c(n)):c.invert(v())},f.clipAngle(90)}([0,22],[45,22],[22.5,-22]).scale(380).center([22.5,2])})),n.projection("collignon",(function(){return r.geoProjection(cn).scale(95.6464).center([0,30])})),n.projection("craig",(function(){return Y(an).scale(249.828).clipAngle(90)})),n.projection("craster",(function(){return r.geoProjection(vn).scale(156.19)})),n.projection("cylindricalEqualArea",(function(){return Y(ln).parallel(38.58).scale(195.044)})),n.projection("cylindricalStereographic",(function(){return Y(pn).scale(124.75)})),n.projection("eckert1",(function(){return r.geoProjection(gn).scale(165.664)})),n.projection("eckert2",(function(){return r.geoProjection(sn).scale(165.664)})),n.projection("eckert3",(function(){return r.geoProjection(hn).scale(180.739)})),n.projection("eckert4",(function(){return r.geoProjection(jn).scale(180.739)})),n.projection("eckert5",(function(){return r.geoProjection(dn).scale(173.044)})),n.projection("eckert6",(function(){return r.geoProjection(mn).scale(173.044)})),n.projection("eisenlohr",(function(){return r.geoProjection(wn).scale(62.5271)})),n.projection("fahey",(function(){return r.geoProjection(Mn).scale(137.152)})),n.projection("foucaut",(function(){return r.geoProjection(En).scale(135.264)})),n.projection("foucautSinusoidal",(function(){var n=.5,t=r.geoProjectionMutator(An),e=t(n);return e.alpha=function(r){return arguments.length?t(n=+r):n},e.scale(168.725)})),n.projection("gilbert",(function(n){null==n&&(n=r.geoOrthographic);var t=n(),e=r.geoEquirectangular().scale(S).precision(0).clipAngle(null).translate([0,0]);function o(n){return t(bn(n))}function i(n){o[n]=function(){return arguments.length?(t[n].apply(t,arguments),o):t[n]()}}return t.invert&&(o.invert=function(n){return Sn(t.invert(n))}),o.stream=function(n){var r=t.stream(n),o=e.stream({point:function(n,t){r.point(n/2,N(j(-t/2*k))*S)},lineStart:function(){r.lineStart()},lineEnd:function(){r.lineEnd()},polygonStart:function(){r.polygonStart()},polygonEnd:function(){r.polygonEnd()}});return o.sphere=r.sphere,o},o.rotate=function(n){return arguments.length?(e.rotate(n),o):e.rotate()},o.center=function(n){return arguments.length?(t.center(bn(n)),o):Sn(t.center())},i("angle"),i("clipAngle"),i("clipExtent"),i("fitExtent"),i("fitHeight"),i("fitSize"),i("fitWidth"),i("scale"),i("translate"),i("precision"),o.scale(249.5)})),n.projection("gingery",(function(){var n=6,t=30*k,e=u(t),o=h(t),c=r.geoProjectionMutator(kn),a=c(t,n),f=a.stream,v=-u(.01*k),l=h(.01*k);return a.radius=function(r){return arguments.length?(e=u(t=r*k),o=h(t),c(t,n)):t*S},a.lobes=function(r){return arguments.length?c(t,n=+r):n},a.stream=function(r){var t=a.rotate(),c=f(r),p=(a.rotate([0,0]),f(r));return a.rotate(t),c.sphere=function(){p.polygonStart(),p.lineStart();for(var r=0,t=2*P/n,c=0;r<n;++r,c-=t)p.point(i(l*u(c),v)*S,N(l*h(c))*S),p.point(i(o*u(c-t/2),e)*S,N(o*h(c-t/2))*S);p.lineEnd(),p.polygonEnd()},c},a.rotate([90,-40]).scale(91.7095).clipAngle(179.999)})),n.projection("ginzburg4",(function(){return r.geoProjection(qn).scale(149.995)})),n.projection("ginzburg5",(function(){return r.geoProjection(xn).scale(153.93)})),n.projection("ginzburg6",(function(){return r.geoProjection(Gn).scale(130.945)})),n.projection("ginzburg8",(function(){return r.geoProjection(Cn).scale(131.747)})),n.projection("ginzburg9",(function(){return r.geoProjection(Dn).scale(131.087)})),n.projection("gringorten",(function(){return r.geoProjection(Qn(Hn)).scale(239.75)})),n.projection("gringortenQuincuncial",(function(){return at(Hn).scale(176.423)})),n.projection("guyou",(function(){return r.geoProjection(Qn(Fn)).scale(151.496)})),n.projection("hammer",(function(){var n=2,t=r.geoProjectionMutator(T),e=t(n);return e.coefficient=function(r){return arguments.length?t(n=+r):n},e.scale(169.529)})),n.projection("hammerRetroazimuthal",(function(){var n=0,t=r.geoProjectionMutator(Tn),e=t(n),o=e.rotate,i=e.stream,u=r.geoCircle();return e.parallel=function(r){if(!arguments.length)return n*S;var o=e.rotate();return t(n=r*k).rotate(o)},e.rotate=function(r){return arguments.length?(o.call(e,[r[0],r[1]-n*S]),u.center([-r[0],-r[1]]),e):((r=o.call(e))[1]+=n*S,r)},e.stream=function(n){return(n=i(n)).sphere=function(){n.polygonStart();var r,t=u.radius(89.99)().coordinates[0],e=t.length-1,o=-1;for(n.lineStart();++o<e;)n.point((r=t[o])[0],r[1]);for(n.lineEnd(),e=(t=u.radius(90.01)().coordinates[0]).length-1,n.lineStart();--o>=0;)n.point((r=t[o])[0],r[1]);n.lineEnd(),n.polygonEnd()},n},e.scale(79.4187).parallel(45).clipAngle(179.999)})),n.projection("healpix",(function(){var n=4,e=r.geoProjectionMutator(On),o=e(n),i=o.stream;return o.lobes=function(r){return arguments.length?e(n=+r):n},o.stream=function(e){var u=o.rotate(),c=i(e),a=(o.rotate([0,0]),i(e));return o.rotate(u),c.sphere=function(){var e,o;r.geoStream((e=180/n,o=[].concat(t.range(-180,180+e/2,e).map(_n),t.range(180,-180-e/2,-e).map(Jn)),{type:"Polygon",coordinates:[180===e?o.map(Kn):o]}),a)},c},o.scale(239.75)})),n.projection("hill",(function(){var n=1,t=r.geoProjectionMutator(Vn),e=t(n);return e.ratio=function(r){return arguments.length?t(n=+r):n},e.scale(167.774).center([0,18.67])})),n.projection("homolosine",(function(){return r.geoProjection($n).scale(152.63)})),n.projection("hufnagel",(function(){var n=1,t=0,e=45*k,o=2,i=r.geoProjectionMutator(nr),u=i(n,t,e,o);return u.a=function(r){return arguments.length?i(n=+r,t,e,o):n},u.b=function(r){return arguments.length?i(n,t=+r,e,o):t},u.psiMax=function(r){return arguments.length?i(n,t,e=+r*k,o):e*S},u.ratio=function(r){return arguments.length?i(n,t,e,o=+r):o},u.scale(180.739)})),n.projection("hyperelliptical",(function(){var n=0,t=2.5,e=1.183136,o=r.geoProjectionMutator(er),i=o(n,t,e);return i.alpha=function(r){return arguments.length?o(n=+r,t,e):n},i.k=function(r){return arguments.length?o(n,t=+r,e):t},i.gamma=function(r){return arguments.length?o(n,t,e=+r):e},i.scale(152.63)})),n.projection("interruptedBoggs",(function(){return ur(X,cr).scale(160.857)})),n.projection("interruptedHomolosine",(function(){return ur($n,ar).scale(152.63)})),n.projection("interruptedMollweide",(function(){return ur(J,fr).scale(169.529)})),n.projection("interruptedMollweideHemispheres",(function(){return ur(J,vr).scale(169.529).rotate([20,0])})),n.projection("interruptedQuarticAuthalic",(function(){return ur(T(1/0),Cr).rotate([20,0]).scale(152.63)})),n.projection("interruptedSinuMollweide",(function(){return ur(Zn,lr,L).rotate([-20,-55]).scale(164.263).center([0,-5.4036])})),n.projection("interruptedSinusoidal",(function(){return ur(Z,pr).scale(152.63).rotate([-20,0])})),n.projection("kavrayskiy7",(function(){return r.geoProjection(gr).scale(158.837)})),n.projection("lagrange",(function(){var n=.5,t=r.geoProjectionMutator(sr),e=t(n);return e.spacing=function(r){return arguments.length?t(n=+r):n},e.scale(124.75)})),n.projection("larrivee",(function(){return r.geoProjection(jr).scale(97.2672)})),n.projection("laskowski",(function(){return r.geoProjection(dr).scale(139.98)})),n.projection("littrow",(function(){return r.geoProjection(mr).scale(144.049).clipAngle(89.999)})),n.projection("loximuthal",(function(){return Y(Pr).parallel(40).scale(158.837)})),n.projection("miller",(function(){return r.geoProjection(wr).scale(108.318)})),n.projection("modifiedStereographicAlaska",(function(){return Sr(yr,[152,-64]).scale(1400).center([-160.908,62.4864]).clipAngle(30).angle(7.8)})),n.projection("modifiedStereographicGs48",(function(){return Sr(Mr,[95,-38]).scale(1e3).clipAngle(55).center([-96.5563,38.8675])})),n.projection("modifiedStereographicGs50",(function(){return Sr(Er,[120,-45]).scale(359.513).clipAngle(55).center([-117.474,53.0628])})),n.projection("modifiedStereographicLee",(function(){return Sr(br,[165,10]).scale(250).clipAngle(130).center([-165,-10])})),n.projection("modifiedStereographicMiller",(function(){return Sr(Ar,[-20,-18]).scale(209.091).center([20,16.7214]).clipAngle(82)})),n.projection("mtFlatPolarParabolic",(function(){return r.geoProjection(zr).scale(164.859)})),n.projection("mtFlatPolarQuartic",(function(){return r.geoProjection(Rr).scale(188.209)})),n.projection("mtFlatPolarSinusoidal",(function(){return r.geoProjection(qr).scale(166.518)})),n.projection("naturalEarth2",(function(){return r.geoProjection(xr).scale(175.295)})),n.projection("nellHammer",(function(){return r.geoProjection(Gr).scale(152.63)})),n.projection("nicolosi",(function(){return r.geoProjection(Dr).scale(127.267)})),n.projection("patterson",(function(){return r.geoProjection(Or).scale(139.319)})),n.projection("peirceQuincuncial",(function(){return at(Fn).scale(111.48)})),n.projection("polyconic",(function(){return r.geoProjection(_r).scale(103.74)})),n.projection("polyhedralButterfly",(function(n){n=n||function(n){var t=r.geoCentroid({type:"MultiPoint",coordinates:n});return r.geoGnomonic().scale(1).translate([0,0]).rotate([-t[0],-t[1]])};var t=tt.map((function(r){return{face:r,project:n(r)}}));return[-1,0,0,1,0,1,4,5].forEach((function(n,r){var e=t[n];e&&(e.children||(e.children=[])).push(t[r])})),Yr(t[0],(function(n,r){return t[n<-P/2?r<0?6:4:n<0?r<0?2:0:n<P/2?r<0?3:1:r<0?7:5]})).angle(-30).scale(101.858).center([0,45])})),n.projection("polyhedralCollignon",(function(n){n=n||function(n){var t=r.geoCentroid({type:"MultiPoint",coordinates:n});return r.geoProjection(ot).translate([0,0]).scale(1).rotate(t[1]>0?[-t[0],0]:[180-t[0],180])};var t=tt.map((function(r){return{face:r,project:n(r)}}));return[-1,0,0,1,0,1,4,5].forEach((function(n,r){var e=t[n];e&&(e.children||(e.children=[])).push(t[r])})),Yr(t[0],(function(n,r){return t[n<-P/2?r<0?6:4:n<0?r<0?2:0:n<P/2?r<0?3:1:r<0?7:5]})).angle(-30).scale(121.906).center([0,48.5904])})),n.projection("polyhedralWaterman",(function(n){n=n||function(n){var t=6===n.length?r.geoCentroid({type:"MultiPoint",coordinates:n}):n[0];return r.geoGnomonic().scale(1).translate([0,0]).rotate([-t[0],-t[1]])};var t=tt.map((function(n){for(var r,t=n.map(ct),e=t.length,o=t[e-1],i=[],u=0;u<e;++u)r=t[u],i.push(ut([.9486832980505138*o[0]+.31622776601683794*r[0],.9486832980505138*o[1]+.31622776601683794*r[1],.9486832980505138*o[2]+.31622776601683794*r[2]]),ut([.9486832980505138*r[0]+.31622776601683794*o[0],.9486832980505138*r[1]+.31622776601683794*o[1],.9486832980505138*r[2]+.31622776601683794*o[2]])),o=r;return i})),e=[],o=[-1,0,0,1,0,1,4,5];t.forEach((function(n,r){for(var i,u,c=tt[r],a=c.length,f=e[r]=[],v=0;v<a;++v)t.push([c[v],n[(2*v+2)%(2*a)],n[(2*v+1)%(2*a)]]),o.push(r),f.push((i=ct(n[(2*v+2)%(2*a)]),u=ct(n[(2*v+1)%(2*a)]),[i[1]*u[2]-i[2]*u[1],i[2]*u[0]-i[0]*u[2],i[0]*u[1]-i[1]*u[0]]))}));var i=t.map((function(r){return{project:n(r),face:r}}));return o.forEach((function(n,r){var t=i[n];t&&(t.children||(t.children=[])).push(i[r])})),Yr(i[0],(function(n,r){var t=u(r),o=[t*u(n),t*h(n),h(r)],c=n<-P/2?r<0?6:4:n<0?r<0?2:0:n<P/2?r<0?3:1:r<0?7:5,a=e[c];return i[it(a[0],o)<0?8+3*c:it(a[1],o)<0?8+3*c+1:it(a[2],o)<0?8+3*c+2:c]})).angle(-30).scale(110.625).center([0,45])})),n.projection("rectangularPolyconic",(function(){return Y(ft).scale(131.215)})),n.projection("robinson",(function(){return r.geoProjection(lt).scale(152.63)})),n.projection("satellite",(function(){var n=2,t=0,e=r.geoProjectionMutator(pt),o=e(n,t);return o.distance=function(r){return arguments.length?e(n=+r,t):n},o.tilt=function(r){return arguments.length?e(n,t=r*k):t*S},o.scale(432.147).clipAngle(z(1/n)*S-1e-6)})),n.projection("sinuMollweide",(function(){return r.geoProjection(Zn).rotate([-20,-55]).scale(164.263).center([0,-5.4036])})),n.projection("sinusoidal",(function(){return r.geoProjection(Z).scale(152.63)})),n.projection("times",(function(){return r.geoProjection(gt).scale(146.153)})),n.projection("twoPointAzimuthalUsa",(function(){return(n=[-158,21.5],r=[-77,39],st(ht,n,r)).clipAngle(60).scale(400);var n,r})),n.projection("twoPointEquidistantUsa",(function(){return(n=[-158,21.5],r=[-77,39],st(jt,n,r)).clipAngle(130).scale(122.571);var n,r})),n.projection("vanDerGrinten",(function(){return r.geoProjection(dt).scale(79.4183)})),n.projection("vanDerGrinten2",(function(){return r.geoProjection(mt).scale(79.4183)})),n.projection("vanDerGrinten3",(function(){return r.geoProjection(Pt).scale(79.4183)})),n.projection("vanDerGrinten4",(function(){return r.geoProjection(wt).scale(127.16)})),n.projection("wagner",Mt),n.projection("wagner4",(function(){return r.geoProjection(bt).scale(176.84)})),n.projection("wagner6",(function(){return r.geoProjection(St).scale(152.63)})),n.projection("wagner7",(function(){return Mt().poleline(65).parallels(60).inflation(0).ratio(200).scale(172.633)})),n.projection("wiechel",(function(){return r.geoProjection(kt).rotate([0,-90,45]).scale(124.75).clipAngle(179.999)})),n.projection("winkel3",(function(){return r.geoProjection(Nt).scale(158.837)}))}));
//# sourceMappingURL=vega-projections-core.min.js.map
